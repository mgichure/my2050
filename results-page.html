<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>
            Results Page
        </title>
        <link rel="icon" type="image/ico" href="Assets/SU_favicon.ico">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">

        <style>
            html{
                scroll-behavior: smooth;
            }

            html::-webkit-scrollbar{
                width: 0vw;
            }
        </style>
    </head>

    <body>
        <div style="position: absolute; width: 100vw; height: 7.5vw; left: 0vw; top: 0vw; background-color: #054170;">
            <p style="text-align: center; font-family: Roboto; font-size: 2.4vw; font-weight: 500; color: #F0A800;">
                My scenario - results in a glimpse
            </p>
        </div>

        <div id="triangle-down" style="position: absolute; left: 17vw; top: 7vw; width: 0vw; height: 0vw; border-left: 1.5vw solid transparent; border-right: 1.5vw solid transparent; border-top: 3vw solid #054170;">
        </div>

        <div style="position: absolute; width: 16.4vw; height: 3.9vw; left: 9.65vw; top: 10.5vw; background-color: #F0A800; border-radius: 0.5vw;">
            <p style="text-align: center; font-family: Roboto; font-size: 1.3vw; color: white; line-height: 1.5vw;">
                CO <span>2</span> e Emissions
            </p>
        </div>

        <a href="javascript:energy();">
            <div style="position: absolute; width: 19.1vw; height: 3.9vw; left: 38.7vw; top: 10.5vw; background-color: #198BBB; border-radius: 0.5vw;">
                <p style="text-align: center; font-family: Roboto; font-size: 1.3vw; color: white; line-height: 1.5vw;">
                    Energy Demand & Supply
                </p>
            </div>
        </a>

        <a href="javascript:detailsPage()">
            <div style="position: absolute; width: 19.1vw; height: 3.9vw; left: 68.2vw; top: 10.5vw; background-color: #198BBB; border-radius: 0.5vw;">
                <p style="text-align: center; font-family: Roboto; font-size: 1.3vw; color: white; line-height: 1.5vw;">
                    Details of my scenario
                </p>
            </div>
        </a>
        <p style="position: absolute; left: 7.4vw; top: 16vw; font-family: Roboto; font-size: 1.35vw; line-height: 2.7vw; color: #707070;">
            These graphs show the emissions and the emission reductions in 2050 as a result of your scenario, compared to the emission levels in 2015 <br> (the official reference year for emissions) and the reference scenario (in which all levers are set at level 1).
        </p>
        <div id="graph-section-background" style="position: absolute; left: 0vw; top: 24vw; width: 100vw; height: 48.1vw; background-color: #ffffff; opacity: 1; display: flex; justify-content: center;">

                <div style="width: 80%; text-align: center;">
                    <canvas id="myChart"></canvas>
                </div>
        </div>



        <img src="images/photo-1663593841920-3a627c66381f-cropped.jpg" style="position: absolute; width: 100vw; left: 0vw; top: 73vw;">
        <div style="position: absolute; width: 100vw; height: 11.5vw; background-color: #054170; top: 73vw; left: 0vw; opacity: 0.77;">
        </div>

        <a href="index.html">
            <div style="position: absolute; width: 14.55vw; height: 4.5vw; left: 14.6vw; top: 66.3vw; background-color: #198BBB; border-radius: 0.5vw; border: 0.2vw solid white;">
                <p style="text-align: center; font-family: Roboto; font-size: 1.68vw; color: white; line-height: 1.5vw;">
                    BACK
                </p>
            </div>
        </a>

        <a href="https://kcert.ilabafrica.ac.ke" target="_blank">
            <div style="position: absolute; width: 14.55vw; height: 4.5vw; left: 42.5vw; top: 66.3vw; background-color: #198BBB; border-radius: 0.5vw; border: 0.2vw solid white;">
                <p style="text-align: center; font-family: Roboto; font-size: 1.68vw; color: white; line-height: 1.5vw;">
                    KCERT
                </p>
            </div>
        </a>

        <div onclick="openForm()" style="position: absolute; width: 14.55vw; height: 4.5vw; left: 71.2vw; top: 66.3vw; background-color: #198BBB; border-radius: 0.5vw; border: 0.2vw solid white; cursor: pointer;">
            <p style="text-align: center; font-family: Roboto; font-size: 1.2vw; color: white; line-height: 2.3vw;;">
                SHARE MY SCENARIO
            </p>
        </div>

        <div id="share-button-popup" style="display: none;">
            <div id="background" onclick="closeForm()" style="position: absolute; left: 0vw; top: 0vw; width: 100vw; height: 100vw; background-color: rgba(255, 255, 255, .15); backdrop-filter: blur(5px);">
            </div>

            <div style="position: fixed; width: 68.4vw; height: 26.5vw; left: 16vw; top: 13.8vw; border-radius: 0.5vw; background-color: white;">
                <div id="x-button" onclick="closeForm()" style="position: absolute; width: 3.5vw; height: 3.5vw; left: 62.2vw; top: 1.3vw; background-color: #054170; border-radius: 10vw; border: 0.15vw solid #F0A828; cursor: pointer;">
                    <p style="text-align: center; margin-top: 0.5vw; font-family: Roboto; font-size: 2.3vw; font-weight: bold; color: white;">
                        X
                    </p>
                </div>

                <p style="position: absolute; left: 7.2vw; top: 1.3vw; font-family: Roboto; font-size: 1.8vw; font-weight: bold; letter-spacing: 0.08vw;">
                    Share my unique scenario:
                </p>

                <div id="icons">
                    <img src="images/facebook.png" style="position: absolute; width: 5vw; left: 7vw; top: 8.4vw;">
                    <img src="images/linkedin.png" style="position: absolute; width: 5vw; left: 16.4vw; top: 8.4vw;">
                    <img src="images/instagram.png" style="position: absolute; width: 5vw; left: 25.8vw; top: 8.4vw;">
                    <a id="twitter_share" href="mailto:?subject=I wanted you to see this site&amp;body=Check out this site http://www.website.com."
                        title="Share by Email">
                        <img  src="images/twitter.png" style="position: absolute; width: 5vw; left: 35.2vw; top: 8.4vw;">
                    </a>
                    <a id="mail_share" href="mailto:?subject=I wanted you to see this site&amp;body=Check out this site http://www.website.com."
                        title="Share by Email">
                        <img src="images/gmail.png" style="position: absolute; width: 5vw; left: 44.6vw; top: 8.4vw;">
                    </a>
                </div>

                <p style="position: absolute; left: 6vw; top: 15.5vw; font-family: Roboto; font-size: 1.2vw; font-weight: bold; letter-spacing: 0.08vw; color: grey;">
                    Share this link
                </p>

                <input type="text" value="" id="buttonnput" style="position: absolute; left: 6vw; top: 19.5vw; width: 43vw; height: 3.5vw; border-radius: 0.2vw; border: 0.15vw solid grey; font-family: Roboto; font-size: 1.2vw; padding-left: 2vw;">

                <button onclick="myFunction()" style="position: absolute; width: 10vw; height: 3.8vw; top: 19.5vw; left: 52.5vw; background-color: #F0A828; border: none; border-radius: 0.5vw; font-family: Roboto; font-size: 1.3vw; color: white; cursor: pointer;">Copy URL</button>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            document.getElementById("buttonnput").placeholder = window.location.href;
            document.getElementById("mail_share").href='mailto:?subject=I wanted you to see this site&body=Check out this site '+window.location.href+' .';
            document.getElementById("twitter_share").href='http://twitter.com/share?text=View my climate change scenario&url='+window.location.href+'&hashtags=my2050,kcert,climatechange';
            function myFunction() {
                navigator.clipboard.writeText(window.location.href);
                alert("Link Copied");
            }

            function openForm() {
                document.getElementById("share-button-popup").style.display = "block";
            }

            function closeForm() {
                document.getElementById("share-button-popup").style.display = "none";
            }
        </script>
        <script>
            const ctx = document.getElementById('myChart');

            const searchParams = new URLSearchParams(window.location.search);


            var electricity_val = searchParams.get('electricity_val');
            var hydrogen_val = searchParams.get('hydrogen_val');
            var other_energy_val = searchParams.get('other_energy_val');
            var waste_management_val = searchParams.get('waste_management_val');
            var agriculture_val = searchParams.get('agriculture_val');
            var industry_val = searchParams.get('industry_val');
            var building_residential_val = searchParams.get('building_residential_val');
            var building_non_residential_val = searchParams.get('building_non_residential_val');
            var transport_domestic_val = searchParams.get('transport_domestic_val');
            var transport_international_val = searchParams.get('transport_international_val');
            var total_emmissions_val = searchParams.get('total_emmissions_val');

            var electricity_current_val = searchParams.get('electricity_current_val');
            var hydrogen_current_val = searchParams.get('hydrogen_current_val');
            var other_energy_current_val = searchParams.get('other_energy_current_val');
            var waste_management_current_val = searchParams.get('waste_management_current_val');
            var agriculture_current_val = searchParams.get('agriculture_current_val');
            var industry_current_val = searchParams.get('industry_current_val');
            var building_residential_current_val = searchParams.get('building_residential_current_val');
            var building_non_residential_current_val = searchParams.get('building_non_residential_current_val');
            var transport_domestic_current_val = searchParams.get('transport_domestic_current_val');
            var transport_international_current_val = searchParams.get('transport_international_current_val');
            var total_emmissions_current_val = searchParams.get('total_emmissions_current_val');

            function energy(){
                window.location.href = "energy-demand-and-supply.html"+window.location.search
            }

            function detailsPage(){
                window.location.href = "details-of-my-scenario.html"+window.location.search
            }

            // function kcertwebtool(){
            //     window.location.href = "https://kcert.ilabafrica.ac.ke"+window.location.search
            // }

            new Chart(ctx, {
              type: 'bar',
              data: {
                labels: ['Total','Hydrogen','Other Energy','Waste','Agriculture','Industry','Residential','Non-residential','Domestic travel','International travel'],
                datasets: [{
                  label: 'Reference value',
                  data: [total_emmissions_val,hydrogen_val,other_energy_val,waste_management_val,agriculture_val,industry_val,building_residential_val,building_non_residential_val,transport_domestic_val,transport_international_val],
                  borderWidth: 1
                },
                {
                  label: 'Scenario value',
                  data: [total_emmissions_current_val,hydrogen_current_val,other_energy_current_val,waste_management_current_val,agriculture_current_val,industry_current_val,building_residential_current_val,building_non_residential_current_val,transport_domestic_current_val,transport_international_current_val],
                  borderWidth: 1
                }
            ]
              },
              options: {
                scales: {
                  y: {
                    beginAtZero: true
                  }
                }
              }
            });
          </script>
    </body>
</html>